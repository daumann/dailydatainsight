var insightID = 3;

var data0or1 = 0;

var birthData = [
    {
        "key" : "Births per Day" ,
        "values" : [[1388530800000,548],[1388617200000,548],[1388703600000,587],[1388790000000,605],[1388876400000,607],[1388962800000,636],[1389049200000,589],[1389135600000,574],[1389222000000,572],[1389308400000,579],[1389394800000,593],[1389481200000,645],[1389567600000,589],[1389654000000,570],[1389740400000,664],[1389826800000,571],[1389913200000,611],[1389999600000,590],[1390086000000,617],[1390172400000,616],[1390258800000,634],[1390345200000,630],[1390431600000,546],[1390518000000,554],[1390604400000,602],[1390690800000,594],[1390777200000,539],[1390863600000,587],[1390950000000,583],[1391036400000,551],[1391122800000,588],[1391209200000,638],[1391295600000,716],[1391382000000,609],[1391468400000,574],[1391554800000,614],[1391641200000,619],[1391727600000,574],[1391814000000,564],[1391900400000,579],[1391986800000,598],[1392073200000,579],[1392159600000,657],[1392246000000,567],[1392332400000,645],[1392418800000,606],[1392505200000,581],[1392591600000,616],[1392678000000,592],[1392764400000,568],[1392850800000,585],[1392937200000,589],[1393023600000,698],[1393110000000,524],[1393196400000,630],[1393282800000,625],[1393369200000,582],[1393455600000,606],[1393542000000,672],[1393628400000,889],[1393714800000,586],[1393801200000,660],[1393887600000,653],[1393974000000,588],[1394060400000,595],[1394146800000,608],[1394233200000,562],[1394319600000,573],[1394406000000,606],[1394492400000,565],[1394578800000,656],[1394665200000,600],[1394751600000,566],[1394838000000,620],[1394924400000,579],[1395010800000,634],[1395097200000,574],[1395183600000,582],[1395270000000,647],[1395356400000,611],[1395442800000,564],[1395529200000,610],[1395615600000,596],[1395702000000,651],[1395788400000,581],[1395874800000,572],[1395961200000,588],[1396047600000,591],[1396134000000,514],[1396216800000,551],[1396303200000,678],[1396389600000,569],[1396476000000,622],[1396562400000,701],[1396648800000,577],[1396735200000,592],[1396821600000,567],[1396908000000,558],[1396994400000,529],[1397080800000,612],[1397167200000,547],[1397253600000,609],[1397340000000,588],[1397426400000,557],[1397512800000,666],[1397599200000,568],[1397685600000,562],[1397772000000,565],[1397858400000,557],[1397944800000,548],[1398031200000,538],[1398117600000,573],[1398204000000,602],[1398290400000,561],[1398376800000,526],[1398463200000,571],[1398549600000,550],[1398636000000,519],[1398722400000,591],[1398808800000,517],[1398895200000,677],[1398981600000,552],[1399068000000,530],[1399154400000,571],[1399240800000,655],[1399327200000,560],[1399413600000,575],[1399500000000,582],[1399586400000,565],[1399672800000,638],[1399759200000,513],[1399845600000,625],[1399932000000,541],[1400018400000,581],[1400104800000,607],[1400191200000,551],[1400277600000,567],[1400364000000,570],[1400450400000,518],[1400536800000,607],[1400623200000,554],[1400709600000,550],[1400796000000,579],[1400882400000,600],[1400968800000,635],[1401055200000,545],[1401141600000,548],[1401228000000,541],[1401314400000,551],[1401400800000,536],[1401487200000,549],[1401573600000,639],[1401660000000,570],[1401746400000,557],[1401832800000,562],[1401919200000,544],[1402005600000,642],[1402092000000,524],[1402178400000,565],[1402264800000,533],[1402351200000,577],[1402437600000,540],[1402524000000,564],[1402610400000,580],[1402696800000,519],[1402783200000,629],[1402869600000,594],[1402956000000,580],[1403042400000,582],[1403128800000,583],[1403215200000,517],[1403301600000,583],[1403388000000,565],[1403474400000,565],[1403560800000,576],[1403647200000,543],[1403733600000,530],[1403820000000,510],[1403906400000,524],[1403992800000,533],[1404079200000,550],[1404165600000,652],[1404252000000,517],[1404338400000,558],[1404424800000,585],[1404511200000,547],[1404597600000,530],[1404684000000,596],[1404770400000,546],[1404856800000,553],[1404943200000,614],[1405029600000,521],[1405116000000,567],[1405202400000,547],[1405288800000,575],[1405375200000,601],[1405461600000,523],[1405548000000,592],[1405634400000,543],[1405720800000,541],[1405807200000,563],[1405893600000,555],[1405980000000,550],[1406066400000,539],[1406152800000,549],[1406239200000,558],[1406325600000,548],[1406412000000,573],[1406498400000,516],[1406584800000,508],[1406671200000,529],[1406757600000,567],[1406844000000,648],[1406930400000,560],[1407016800000,535],[1407103200000,562],[1407189600000,572],[1407276000000,606],[1407362400000,542],[1407448800000,622],[1407535200000,560],[1407621600000,634],[1407708000000,563],[1407794400000,628],[1407880800000,570],[1407967200000,598],[1408053600000,649],[1408140000000,583],[1408226400000,551],[1408312800000,589],[1408399200000,567],[1408485600000,563],[1408572000000,534],[1408658400000,555],[1408744800000,597],[1408831200000,541],[1408917600000,589],[1409004000000,551],[1409090400000,597],[1409176800000,591],[1409263200000,575],[1409349600000,501],[1409436000000,544],[1409522400000,651],[1409608800000,546],[1409695200000,579],[1409781600000,570],[1409868000000,557],[1409954400000,572],[1410040800000,591],[1410127200000,628],[1410213600000,594],[1410300000000,593],[1410386400000,576],[1410472800000,641],[1410559200000,591],[1410645600000,610],[1410732000000,642],[1410818400000,610],[1410904800000,603],[1410991200000,561],[1411077600000,650],[1411164000000,588],[1411250400000,594],[1411336800000,625],[1411423200000,605],[1411509600000,603],[1411596000000,613],[1411682400000,582],[1411768800000,612],[1411855200000,571],[1411941600000,634],[1412028000000,556],[1412114400000,683],[1412200800000,632],[1412287200000,564],[1412373600000,618],[1412460000000,598],[1412546400000,608],[1412632800000,532],[1412719200000,591],[1412805600000,575],[1412892000000,676],[1412978400000,593],[1413064800000,598],[1413151200000,591],[1413237600000,590],[1413324000000,669],[1413410400000,590],[1413496800000,497],[1413583200000,584],[1413669600000,555],[1413756000000,611],[1413842400000,558],[1413928800000,505],[1414015200000,536],[1414101600000,592],[1414188000000,580],[1414274400000,563],[1414364400000,546],[1414450800000,528],[1414537200000,498],[1414623600000,584],[1414710000000,599],[1414796400000,671],[1414882800000,555],[1414969200000,548],[1415055600000,596],[1415142000000,586],[1415228400000,552],[1415314800000,557],[1415401200000,601],[1415487600000,553],[1415574000000,611],[1415660400000,633],[1415746800000,554],[1415833200000,511],[1415919600000,560],[1416006000000,572],[1416092400000,546],[1416178800000,578],[1416265200000,558],[1416351600000,534],[1416438000000,556],[1416524400000,509],[1416610800000,597],[1416697200000,565],[1416783600000,597],[1416870000000,551],[1416956400000,553],[1417042800000,551],[1417129200000,523],[1417215600000,534],[1417302000000,617],[1417388400000,605],[1417474800000,550],[1417561200000,605],[1417647600000,501],[1417734000000,561],[1417820400000,561],[1417906800000,567],[1417993200000,578],[1418079600000,568],[1418166000000,548],[1418252400000,532],[1418338800000,685],[1418425200000,549],[1418511600000,571],[1418598000000,548],[1418684400000,553],[1418770800000,593],[1418857200000,547],[1418943600000,519],[1419030000000,530],[1419116400000,542],[1419202800000,532],[1419289200000,515],[1419375600000,538],[1419462000000,645],[1419548400000,473],[1419634800000,523],[1419721200000,545],[1419807600000,511],[1419894000000,515],[1419980400000,576]]
    },
    {
        "key" : "Births per Months" ,
        "bar": true,
        "values" :[[1390271383909,18485],[1392949783910,18285],[1395368983910,20127],[1398043783910,18567],[1400635783910,19082],[1403314183910,18125],[1405906183910,18578],[1408584583910,19152],[1411262983910,19247],[1413854983910,19467],[1416536983910,18336],[1419128983910,18563]]
    }

].map(function(series) {
        series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });
        return series;
    });


var chart;

nv.addGraph(function() {
    chart = nv.models.linePlusBarChart()
        .margin({top: 30, right: 60, bottom: 50, left: 70})
        .x(function(d,i) { return i })
        .color(["rgb(9,106,156)", "rgb(54,154,104)"]);  // rgb(54,154,104)



    chart.xAxis.tickFormat(function(d) {
        if (data0or1 == 0){
            var dx = birthData[data0or1].values[d] && birthData[data0or1].values[d].x || 0;
            return dx ? d3.time.format('%d')(new Date(dx)) + ". " + d3.time.format('%B')(new Date(dx)) : '';
        }
        else {
            var dx = birthData[data0or1].values[d] && birthData[data0or1].values[d].x || 0;
            return dx ? d3.time.format('%B')(new Date(dx)) : '';
        }
    })
        .showMaxMin(true);

    chart.y1Axis
        .tickFormat(function(d) { return d3.format(',.')(d) });

    chart.y2Axis
        .tickFormat(function(d) { return d3.format(',.')(d) });

    chart.bars.forceY([0]).padData(false);
    //chart.lines.forceY([0]);

    d3.select('#contentSVG').append("svg")
        .datum(birthData)
        .transition().duration(500).call(chart);

    nv.utils.windowResize(chart.update);

    chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart;
});